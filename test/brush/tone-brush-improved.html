<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>改良トーンブラシ</title><style>body{font:12px Arial;margin:0;padding:5px;background:#f0f0f0}#canvas{border:1px solid #ccc}#mainContainer{display:flex;gap:5px}#controls{flex:0 0 auto}label{display:flex;align-items:center;margin:2px 0}button,input[type=color],select{padding:2px;font-size:12px}input[type=range]{width:100px;margin:0 5px}</style></head><body><div id="mainContainer"><canvas id="canvas" width="600" height="600"></canvas><div id="controls"><button id="clearButton">クリア</button> <label>種別: <select id="brushType"><option value="dot">点</option><option value="circle">丸</option><option value="cross">十字</option><option value="x">✕</option><option value="heart">ハート</option><option value="triangle">三角形</option></select></label> <label>種別サイズ: <input type="range" id="elementSize" min="1" max="20" value="4"> <span id="elementSizeValue">4</span></label> <label>トーンサイズ: <input type="range" id="toneSize" min="10" max="100" value="40"> <span id="toneSizeValue">40</span></label> <label>間隔: <input type="range" id="gap" min="0" max="20" value="2"> <span id="gapValue">2</span></label> <label>グラデーション:<input type="checkbox" id="gradient"></label> <label>グラデーション方向: <select id="gradientDirection"><option value="tb">上から下</option><option value="bt">下から上</option><option value="rl">右から左</option><option value="lr">左から右</option></select></label> <label>色1:<input type="color" id="color1" value="#000000"></label> <label>色2:<input type="color" id="color2" value="#ffffff"></label></div></div><script>document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("canvas"),t=e.getContext("2d");let n,o=!1,a=0,r=0,i=4,d=40,l=2,c="dot",s="#000000",u="#ffffff",m=!1,g="tb";function v(){n=function(e,n,o,a,r,i){const d=document.createElement("canvas"),l=Math.ceil(o/(e+a));d.width=d.height=l*(e+a);const c=d.getContext("2d");if(m){const e=c.createLinearGradient(0,0,"rl"===g||"lr"===g?d.width:0,"tb"===g||"bt"===g?d.height:0);e.addColorStop("bt"===g||"rl"===g?1:0,r),e.addColorStop("bt"===g||"rl"===g?0:1,i),c.fillStyle=c.strokeStyle=e}else c.fillStyle=c.strokeStyle=r;for(let t=0;t<l;t++)for(let o=0;o<l;o++){const r=t*(e+a),i=o*(e+a);switch(n){case"dot":c.fillRect(r,i,e,e);break;case"circle":c.beginPath(),c.arc(r+e/2,i+e/2,e/2,0,2*Math.PI),c.fill();break;case"cross":c.lineWidth=e/4,c.beginPath(),c.moveTo(r+e/2,i),c.lineTo(r+e/2,i+e),c.moveTo(r,i+e/2),c.lineTo(r+e,i+e/2),c.stroke();break;case"x":c.lineWidth=e/4,c.beginPath(),c.moveTo(r,i),c.lineTo(r+e,i+e),c.moveTo(r+e,i),c.lineTo(r,i+e),c.stroke();break;case"heart":c.beginPath();const t=.3*e;c.moveTo(r+e/2,i+.7*e),c.bezierCurveTo(r+e/2,i,r,i,r,i+t),c.bezierCurveTo(r,i+(e+t)/2,r+e/2,i+e,r+e/2,i+e),c.bezierCurveTo(r+e/2,i+e,r+e,i+(e+t)/2,r+e,i+t),c.bezierCurveTo(r+e,i,r+e/2,i,r+e/2,i+.7*e),c.closePath(),c.fill();break;case"triangle":c.beginPath(),c.moveTo(r+e/2,i),c.lineTo(r,i+e),c.lineTo(r+e,i+e),c.closePath(),c.fill()}}return t.createPattern(d,"repeat")}(i,c,d,l,s,u)}e.addEventListener("mousedown",(e=>{o=!0,[a,r]=[e.offsetX,e.offsetY]})),e.addEventListener("mousemove",(e=>{var i,l,c,s;o&&(i=a,l=r,c=e.offsetX,s=e.offsetY,t.beginPath(),t.moveTo(i,l),t.lineTo(c,s),t.strokeStyle=n,t.lineWidth=d,t.lineCap="round",t.lineJoin="round",t.stroke(),[a,r]=[e.offsetX,e.offsetY])})),e.addEventListener("mouseup",(()=>o=!1)),e.addEventListener("mouseout",(()=>o=!1)),document.getElementById("clearButton").addEventListener("click",(()=>t.clearRect(0,0,e.width,e.height))),document.getElementById("brushType").addEventListener("change",(e=>{c=e.target.value,v()})),document.getElementById("color1").addEventListener("input",(e=>{s=e.target.value,v()})),document.getElementById("color2").addEventListener("input",(e=>{u=e.target.value,v()})),document.getElementById("gradient").addEventListener("change",(e=>{m=e.target.checked,v()})),document.getElementById("gradientDirection").addEventListener("change",(e=>{g=e.target.value,v()})),["elementSize","toneSize","gap"].forEach((e=>{const t=document.getElementById(e),n=document.getElementById(e+"Value");t.addEventListener("input",(t=>{const o=parseInt(t.target.value);n.textContent=o,"elementSize"===e&&(i=o),"toneSize"===e&&(d=o),"gap"===e&&(l=o),v()}))})),v()}))</script></body></html>