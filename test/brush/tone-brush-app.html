<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>エラー修正版トーンブラシアプリケーション</title><style>body{font-family:Arial,sans-serif;margin:0;padding:20px;background-color:#f0f0f0}#canvas-container{margin-bottom:20px}canvas{border:1px solid #ccc}.controls{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}button{padding:10px;cursor:pointer}input[type=range]{width:200px}.control-group{display:flex;flex-direction:column;align-items:flex-start}</style></head><body><h1>エラー修正版トーンブラシアプリケーション</h1><div id="canvas-container"><canvas id="canvas" width="800" height="600"></canvas></div><div class="controls"><button id="clear">クリア</button><div class="control-group"><label for="brush-size">ブラシサイズ: <span id="brush-size-display">20</span></label> <input type="range" id="brush-size" min="1" max="50" value="20"></div><div class="control-group"><label for="tone-size">トーンサイズ: <span id="tone-size-display">4</span></label> <input type="range" id="tone-size" min="2" max="20" value="4"></div><div class="control-group"><label for="tone-density">トーン密度: <span id="tone-density-display">50</span>%</label> <input type="range" id="tone-density" min="0" max="100" value="50"></div></div><script>document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("canvas"),t=e.getContext("2d");let n,o=!1,d=0,s=0,i=20,a=4,l=50;function r(){n=function(e,n){const o=document.createElement("canvas");o.width=e,o.height=e;const d=o.getContext("2d");d.fillStyle="white",d.fillRect(0,0,e,e),d.fillStyle="black";for(let t=0;t<e;t++)for(let o=0;o<e;o++)100*Math.random()<n&&d.fillRect(t,o,1,1);return t.createPattern(o,"repeat")}(a,l)}e.addEventListener("mousedown",(e=>{o=!0,[d,s]=[e.offsetX,e.offsetY]})),e.addEventListener("mousemove",(e=>{var a,l,r,c;o&&(a=d,l=s,r=e.offsetX,c=e.offsetY,t.beginPath(),t.moveTo(a,l),t.lineTo(r,c),t.strokeStyle=n,t.lineWidth=i,t.lineCap="round",t.lineJoin="round",t.stroke(),[d,s]=[e.offsetX,e.offsetY])})),e.addEventListener("mouseup",(()=>o=!1)),e.addEventListener("mouseout",(()=>o=!1)),document.getElementById("clear").addEventListener("click",(()=>{t.clearRect(0,0,e.width,e.height)})),["brush-size","tone-size","tone-density"].forEach((e=>{const t=document.getElementById(e),n=document.getElementById(`${e}-display`);t.addEventListener("input",(t=>{const o=parseInt(t.target.value);n.textContent=o+("tone-density"===e?"%":""),"brush-size"===e&&(i=o),"tone-size"===e&&(a=o),"tone-density"===e&&(l=o),r()}))})),r()}))</script></body></html>