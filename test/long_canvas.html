<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Canvas Tiling Example</title><style>body{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#f0f0f0}.canvas-container{height:1000px;width:700px;overflow-y:scroll;padding:10px;box-sizing:border-box;border:1px solid #ccc}canvas{background-color:#d3d3d3}</style></head><body><div class="canvas-container" id="canvas-container"><canvas id="mangaImageCanvas" width="690" height="1000"></canvas></div><script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script><script>const canvas=new fabric.Canvas("mangaImageCanvas"),canvasContainer=document.getElementById("canvas-container"),totalHeight=2e4,tileHeight=1e3,tileCount=Math.ceil(20),tiles=[];let imageObject;for(let e=0;e<tileCount;e++){const e=document.createElement("canvas");e.width=690,e.height=1e3;const t=e.getContext("2d");tiles.push({canvas:e,context:t})}function drawTiles(){for(let e=0;e<tileCount;e++){const t=tiles[e].context;if(t.clearRect(0,0,690,1e3),t.fillStyle="white",t.fillRect(0,0,690,1e3),imageObject){const a=imageObject.top,n=1e3*e;a+imageObject.height>n&&a<n+1e3&&t.drawImage(imageObject.getElement(),50,a-n)}}}function updateVisibleArea(){const e=canvasContainer.scrollTop,t=canvas.getContext("2d"),a=Math.floor(e/1e3),n=Math.min(a+1,tileCount-1);t.clearRect(0,0,canvas.width,canvas.height);for(let i=a;i<=n;i++){const n=1e3*(i-a)-e%1e3;t.drawImage(tiles[i].canvas,0,n)}}fabric.Image.fromURL("https://example.com/path/to/your/image.jpg",(function(e){imageObject=e.set({left:50,top:50,selectable:!0}),canvas.add(imageObject),imageObject.on("moving",(function(){drawTiles(),updateVisibleArea()})),drawTiles(),updateVisibleArea()})),canvasContainer.addEventListener("scroll",updateVisibleArea)</script></body></html>