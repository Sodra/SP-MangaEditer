function loadSVGPlusReset(svgString){allRemove();fabric.loadSVGFromString(svgString,(function(objects,options){var canvasUsableHeight=canvas.height-svgPagging;var overallScaleX=canvas.width/options.width;var overallScaleY=canvasUsableHeight/options.height;var scaleToFit=Math.min(overallScaleX,overallScaleY);var offsetX=(canvas.width-options.width*scaleToFit)/2;var offsetY=svgPagging/2+(canvasUsableHeight-options.height*scaleToFit)/2;clipAreaCoords.left=offsetX;clipAreaCoords.top=offsetY;clipAreaCoords.width=options.width*scaleToFit+4;clipAreaCoords.height=options.height*scaleToFit+4;canvas.backgroundColor="white";objects.forEach((function(obj){obj.scaleX=scaleToFit;obj.scaleY=scaleToFit;obj.top=obj.top*scaleToFit+offsetY;obj.left=obj.left*scaleToFit+offsetX;obj.setCoords();obj.selectable=true;obj.hasControls=true;obj.lockMovementX=false;obj.lockMovementY=false;obj.lockRotation=false;obj.lockScalingX=false;obj.lockScalingY=false;canvas.add(obj)}));changeStrokeWidth(document.getElementById("strokeWidth").value);canvas.renderAll()}))}function loadSVGReadOnly(svgString){var applyColor=document.getElementById("applyColorChange").checked;var fillColor=document.getElementById("bubbleFillColor").value;var strokeColor=document.getElementById("bubbleStrokeColor").value;fabric.loadSVGFromString(svgString,(function(objects,options){var canvasUsableHeight=canvas.height*.3-svgPagging;var overallScaleX=canvas.width*.3/options.width;var overallScaleY=canvasUsableHeight/options.height;var scaleToFit=Math.min(overallScaleX,overallScaleY);var offsetX=(canvas.width-options.width*scaleToFit)/2;var offsetY=svgPagging/2+(canvasUsableHeight-options.height*scaleToFit)/2;var scaledObjects=objects.map((function(obj){obj.scaleX=scaleToFit;obj.scaleY=scaleToFit;obj.top=obj.top*scaleToFit+offsetY;obj.left=obj.left*scaleToFit+offsetX;if(applyColor){obj.set({fill:fillColor,stroke:strokeColor})}return obj}));var group=new fabric.Group(scaledObjects,{left:offsetX,top:offsetY,selectable:true,hasControls:true,lockMovementX:false,lockMovementY:false,lockRotation:false,lockScalingX:false,lockScalingY:false});canvas.add(group);canvas.renderAll();updateLayerPanel()}))}const previewAreaVertical=document.getElementById("svg-preview-area-vertical");const previewAreaLandscape=document.getElementById("svg-preview-area-landscape");const speechBubbleArea=document.getElementById("speech-bubble-svg-preview-area1");window.onload=function(){previewAreaVertical.innerHTML="";MangaPanelsImage_Vertical.forEach((item=>{const img=document.createElement("img");img.src="data:image/svg+xml;utf8,"+encodeURIComponent(item.svg);img.classList.add("svg-preview");img.alt=item.name;img.addEventListener("click",(function(){loadSVGPlusReset(item.svg)}));previewAreaVertical.appendChild(img)}));previewAreaLandscape.innerHTML="";MangaPanelsImage_Landscape.forEach((item=>{const img=document.createElement("img");img.src="data:image/svg+xml;utf8,"+encodeURIComponent(item.svg);img.classList.add("svg-preview");img.alt=item.name;img.addEventListener("click",(function(){loadSVGPlusReset(item.svg)}));previewAreaLandscape.appendChild(img)}));SpeechBubble.forEach((item=>{const img=document.createElement("img");img.src="data:image/svg+xml;utf8,"+encodeURIComponent(item.svg);img.classList.add("svg-preview");img.alt=item.name;img.addEventListener("click",(function(){loadSVGReadOnly(item.svg)}));speechBubbleArea.appendChild(img)}))};document.addEventListener("DOMContentLoaded",(function(){var svgPreviewArea=document.getElementById("svg-container-vertical");svgPreviewArea.addEventListener("mousedown",(function(event){event.preventDefault();event.stopPropagation()}),false)}));document.addEventListener("DOMContentLoaded",(function(){var svgPreviewArea=document.getElementById("svg-container-landscape");svgPreviewArea.addEventListener("mousedown",(function(event){event.preventDefault();event.stopPropagation()}),false)}));document.addEventListener("DOMContentLoaded",(function(){var svgPreviewArea=document.getElementById("speech-bubble-area1");svgPreviewArea.addEventListener("mousedown",(function(event){if(!event.target.closest("input[type='range']")){event.preventDefault();event.stopPropagation()}}),false)}));